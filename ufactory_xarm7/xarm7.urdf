<?xml version="1.0"?>
<!--
    This URDF uses package:// URIs to reference the expected mesh files from the
    original xarm_description ROS package structure.
    Mesh paths assume a standard structure: package://xarm_description/meshes/...
    Inertial properties for links 1-7 are placeholders, as the actual values were in external YAML files.
-->
<robot name="xarm7">

    <!-- Define Materials -->
    <material name="White">
        <color rgba="1.0 1.0 1.0 1.0"/>
    </material>
    <material name="Silver">
        <color rgba="0.7 0.7 0.7 1.0"/>
    </material>

    <!-- Numerical constants used to replace symbolic pi terms -->
    <property name="pi_val" value="3.14159265359" />

    <!-- ================= Link Base ================= -->
    <link name="link_base">
        <!-- Explicit Inertial from XACRO -->
        <inertial>
            <origin xyz="-0.021131 -0.0016302 0.056488" rpy="0 0 0" />
            <mass value="0.88556" />
            <inertia
                ixx="0.0030595" ixy="0.00012259" ixz="-0.00062705"
                iyy="0.0037783" iyz="0.00027023" izz="0.0020125" />
        </inertial>
        <!-- Actual Mesh Reference: visual/link_base.stl -->
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/base_link.stl"/>
            </geometry>
            <material name="White"/>
        </visual>
        <!-- Actual Mesh Reference: collision/link_base.stl -->
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/base_link.stl"/>
            </geometry>
        </collision>
    </link>

    <!-- Simplified Inertial Placeholders (since YAML data is unavailable) -->
    <property name="link_mass" value="0.5"/>
    <property name="I_val" value="0.001"/>

    <!-- ================= Link 1 ================= -->
    <link name="link1">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="0.5"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link1.stl"/>
            </geometry>
            <material name="White"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link1.stl"/>
            </geometry>
        </collision>
    </link>
    <joint name="joint1" type="revolute">
        <origin xyz="0 0 0.267" rpy="0 0 0" />
        <parent link="link_base" />
        <child link="link1" />
        <axis xyz="0 0 1" />
        <limit
            lower="-6.283185" 
            upper="6.283185" 
            effort="50"
            velocity="3.14" />
        <dynamics damping="10" friction="1" />
    </joint>

    <!-- ================= Link 2 ================= -->
    <link name="link2">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="0.5"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link2.stl"/>
            </geometry>
            <material name="White"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link2.stl"/>
            </geometry>
        </collision>
    </link>
    <joint name="joint2" type="revolute">
        <origin xyz="0 0 0" rpy="-1.5708 0 0" />
        <parent link="link1" />
        <child link="link2" />
        <axis xyz="0 0 1" />
        <limit
            lower="-2.059"
            upper="2.0944"
            effort="50"
            velocity="3.14" />
        <dynamics damping="10" friction="1" />
    </joint>

    <!-- ================= Link 3 ================= -->
    <link name="link3">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="0.5"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link3.stl"/>
            </geometry>
            <material name="White"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link3.stl"/>
            </geometry>
        </collision>
    </link>
    <joint name="joint3" type="revolute">
        <origin xyz="0 -0.293 0" rpy="1.5708 0 0" />
        <parent link="link2" />
        <child link="link3" />
        <axis xyz="0 0 1" />
        <limit
            lower="-6.283185" 
            upper="6.283185"
            effort="30"
            velocity="3.14" />
        <dynamics damping="5" friction="1" />
    </joint>

    <!-- ================= Link 4 ================= -->
    <link name="link4">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="0.5"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link4.stl"/>
            </geometry>
            <material name="White"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link4.stl"/>
            </geometry>
        </collision>
    </link>
    <joint name="joint4" type="revolute">
        <origin xyz="0.0525 0 0" rpy="1.5708 0 0" />
        <parent link="link3" />
        <child link="link4" />
        <axis xyz="0 0 1" />
        <limit
            lower="-0.19198"
            upper="3.927"
            effort="30"
            velocity="3.14" />
        <dynamics damping="5" friction="1" />
    </joint>

    <!-- ================= Link 5 ================= -->
    <link name="link5">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="0.5"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link5.stl"/>
            </geometry>
            <material name="White"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link5.stl"/>
            </geometry>
        </collision>
    </link>
    <joint name="joint5" type="revolute">
        <origin xyz="0.0775 -0.3425 0" rpy="1.5708 0 0" />
        <parent link="link4" />
        <child link="link5" />
        <axis xyz="0 0 1" />
        <limit
            lower="-6.283185" 
            upper="6.283185" 
            effort="30"
            velocity="3.14" />
        <dynamics damping="5" friction="1" />
    </joint>

    <!-- ================= Link 6 ================= -->
    <link name="link6">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="0.5"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link6.stl"/>
            </geometry>
            <material name="White"/>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link6.stl"/>
            </geometry>
        </collision>
    </link>
    <joint name="joint6" type="revolute">
        <origin xyz="0 0 0" rpy="1.5708 0 0" />
        <parent link="link5" />
        <child link="link6" />
        <axis xyz="0 0 1" />
        <limit
            lower="-1.69297"
            upper="3.141593" 
            effort="20"
            velocity="3.14" />
        <dynamics damping="2" friction="1" />
    </joint>

    <!-- ================= Link 7 (End Effector) ================= -->
    <link name="link7">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="0.5"/>
            <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
        </inertial>
        <!-- Actual Mesh Reference (Visual) -->
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="assets/link7.stl"/>
            </geometry>
            <material name="Silver"/>
        </visual>
        <!-- Actual Mesh Reference (Collision - often uses end_tool mesh) -->
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://xarm_description/meshes/end_tool/collision/end_tool.stl"/>
            </geometry>
        </collision>
    </link>
    <joint name="joint7" type="revolute">
        <origin xyz="0.076 0.097 0" rpy="-1.5708 0 0" />
        <parent link="link6" />
        <child link="link7" />
        <axis xyz="0 0 1" />
        <limit
            lower="-6.283185"
            upper="6.283185"
            effort="20"
            velocity="3.14" />
        <dynamics damping="2" friction="1" />
    </joint>

</robot>